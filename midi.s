.data
# Notas
# 27826 -> 28600
VOCALS:		.word 0,28600,75,217,77,217,78,218,80,217,82,435,87,217,85,218,82,434,75,435,82,218,80,217,78,217,77,218,75,217,77,218,78,217,80,217,82,435,80,218,78,217,77,217,75,218,77,217,78,217,77,218,75,217,74,218,78,217,75,217,77,218,78,217,80,218,82,434,87,218,85,217,82,435,75,435,82,217,80,218,78,217,77,217,75,218,77,217,78,217,80,218,82,435,80,217,78,217,77,435,78,435,80,435,82,435,75,217,77,217,78,218,80,217,82,435,87,217,85,218,82,434,75,435,82,218,80,217,78,217,77,218,75,217,77,218,78,217,80,217,82,435,80,218,78,217,77,217,75,218,77,217,78,218,77,217,75,217,74,218,78,217,75,217,77,218,78,217,80,218,82,434,87,218,85,217,82,435,75,435,82,217,80,218,78,217,77,217,75,218,77,217,78,218,80,217,82,435,80,217,78,217,77,435,78,435,80,435,82,435,85,217,87,217,82,218,80,217,82,435,80,217,82,218,85,217,87,218,82,217,80,217,82,435,80,217,82,218,80,217,78,218,77,217,73,217,75,435,73,218,75,217,77,217,78,218,80,217,82,218,75,434,80,218,82,217,85,217,87,218,82,217,80,218,82,434,80,218,82,217,85,218,87,217,82,217,80,218,82,435,80,217,82,217,80,218,78,217,77,218,73,217,75,435,73,217,75,217,77,218,78,217,80,218,82,217,75,435,80,217,82,218,85,217,87,217,82,218,80,217,82,435,80,217,82,218,85,217,87,218,82,217,80,217,82,435,80,217,82,218,80,217,78,218,77,217,73,217,75,435,73,218,75,217,77,217,78,218,80,217,82,218,75,434,80,218,82,217,85,218,87,217,82,217,80,218,82,434,80,218,82,217,85,218,87,217,82,217,80,218,82,435,87,217,89,217,90,218,89,217,87,218,85,217,82,435,80,217,82,218,80,217,78,217,77,218,73,217,75,217,0,218,80,217,82,218,85,217,87,217,82,218,80,217,82,435,80,217,82,218,85,217,87,218,82,217,80,217,82,435,80,218,82,217,80,217,78,218,77,217,73,217,75,435,73,218,75,217,77,217,78,218,80,217,82,218,75,434,80,218,82,217,85,218,87,217,82,217,80,218,82,435,80,217,82,217,85,218,87,217,82,217,80,218,82,435,80,217,82,217,80,218,78,217,77,218,73,217,75,435,73,217,75,218,77,217,78,217,80,218,82,217,75,435,80,217,82,218,85,217,87,217,82,218,80,217,82,435,80,217,82,218,85,217,87,218,82,217,80,217,82,435,80,218,82,217,80,217,78,218,77,217,73,217,75,435,73,218,75,217,77,217,78,218,80,217,82,218,75,434,80,218,82,217,85,218,87,217,82,217,80,218,82,435,80,217,82,217,85,218,87,217,82,217,80,218,82,435,87,217,89,217,90,218,89,217,87,218,85,217,82,435,80,217,82,218,80,217,78,217,77,218,73,217,75,218,0,14565,75,217,77,217,78,218,80,217,82,435,87,217,85,218,82,435,75,434,82,218,80,217,78,218,77,217,75,217,77,218,78,217,80,218,82,434,80,218,78,217,77,217,75,218,77,217,78,218,77,217,75,217,74,218,78,217,75,218,77,217,78,217,80,218,82,435,87,217,85,217,82,435,75,435,82,217,80,218,78,217,77,217,75,218,77,217,78,218,80,217,82,435,80,217,78,218,77,434,78,435,80,435,82,435,75,217,77,218,78,217,80,217,82,435,87,217,85,218,82,435,75,434,82,218,80,217,78,218,77,217,75,217,77,218,78,217,80,218,82,434,80,218,78,217,77,218,75,217,77,217,78,218,77,217,75,217,74,218,78,217,75,218,77,217,78,217,80,218,82,435,87,217,85,217,82,435,75,435,82,217,80,218,78,217,77,218,75,217,77,217,78,218,80,217,82,435,80,217,78,218,77,434,78,435,80,435,82,435,85,217,87,218,82,217,80,217,82,435,80,218,82,217,85,217,87,218,82,217,80,217,82,435,80,218,82,217,80,217,78,218,77,217,73,218,75,434,73,218,75,217,77,218,78,217,80,217,82,218,75,434,80,218,82,217,85,218,87,217,82,217,80,218,82,435,80,217,82,217,85,218,87,217,82,218,80,217,82,435,80,217,82,218,80,217,78,217,77,218,73,217,75,435,73,217,75,218,77,217,78,217,80,218,82,217,75,435,80,217,82,218,85,217,87,218,82,217,80,217,82,435,80,218,82,217,85,217,87,218,82,217,80,217,82,435,80,218,82,217,80,217,78,218,77,217,73,218,75,434,73,218,75,217,77,218,78,217,80,217,82,218,75,435,80,217,82,217,85,218,87,217,82,217,80,218,82,435,80,217,82,217,85,218,87,217,82,218,80,217,82,435,87,217,89,218,90,217,89,217,87,218,85,217,82,435,80,217,82,218,80,217,78,217,77,218,73,217,75,218,0,217,80,217,82,218,0,0
VOCALS_END:	.word 0, 0
VOCALS_CURR:	.word 0

# 13913 + 800 = 14700
SYNTH:		.word 0,14700,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,109,39,108,39,218,42,108,39,109,44,217,42,109,44,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,44,218,42,109,44,108,42,218,39,108,42,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,108,44,218,42,109,44,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,109,37,108,39,109,44,217,42,109,44,109,42,217,39,109,42,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,42,108,39,109,44,217,42,109,44,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,35,218,35,108,35,109,0,109,35,108,34,109,35,109,37,217,37,109,37,109,0,108,37,109,35,109,37,108,39,218,42,109,39,108,44,218,42,108,44,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,108,44,218,42,109,44,108,35,218,35,108,35,109,0,109,35,108,34,109,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,37,218,37,108,37,109,0,109,37,109,35,108,37,109,39,217,42,109,39,109,44,217,42,109,44,108,39,218,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,42,108,39,109,44,217,42,109,44,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,35,218,35,108,35,109,0,109,35,108,34,109,35,109,37,217,37,109,37,109,0,108,37,109,35,109,37,108,39,218,42,108,39,109,44,218,42,108,44,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,108,44,218,42,109,44,108,35,218,35,108,35,109,0,109,35,108,34,109,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,37,218,37,217,39,218,39,217,41,217,41,218,42,217,42,217,35,218,35,109,35,108,0,109,35,109,34,108,35,109,35,217,35,109,35,109,0,109,35,108,34,109,35,109,37,217,37,109,37,108,0,109,37,109,35,108,37,109,37,218,40,108,37,109,42,217,40,109,42,109,39,217,39,109,39,108,0,109,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,42,108,39,109,44,218,42,108,44,109,35,217,35,109,35,109,0,108,35,109,34,109,35,109,35,217,35,109,35,108,0,109,35,109,34,108,35,109,37,217,37,109,37,109,0,109,37,108,35,109,37,109,37,217,40,109,37,108,42,218,40,109,42,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,109,44,217,42,109,44,108,35,218,35,109,35,108,0,109,35,109,34,108,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,109,37,217,37,109,37,108,0,109,37,109,35,108,37,109,37,218,40,108,37,109,42,217,40,109,42,109,39,217,39,109,39,108,0,109,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,42,108,39,109,44,218,42,108,44,109,35,217,35,109,35,109,0,108,35,109,34,109,35,109,35,217,35,109,35,108,0,109,35,109,34,108,35,109,37,217,37,109,37,109,0,109,37,108,35,109,37,109,37,217,40,109,37,108,42,218,40,108,42,109,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,44,435,42,434,0,27826,39,218,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,42,108,39,109,44,217,42,109,44,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,44,218,42,108,44,109,42,218,39,108,42,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,108,44,218,42,109,44,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,109,37,108,39,109,44,217,42,109,44,109,42,217,39,109,42,108,39,218,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,42,108,39,109,44,217,42,109,44,109,35,217,35,109,35,108,0,109,35,109,34,109,35,108,35,218,35,108,35,109,0,109,35,108,34,109,35,109,37,217,37,109,37,109,0,108,37,109,35,109,37,108,39,218,42,108,39,109,44,218,42,108,44,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,108,44,218,42,108,44,109,35,218,35,108,35,109,0,109,35,108,34,109,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,37,218,37,108,37,109,0,109,37,108,35,109,37,109,39,217,42,109,39,109,44,217,42,109,44,108,39,218,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,108,39,109,39,218,42,108,39,109,44,217,42,109,44,109,35,217,35,109,35,108,0,109,35,109,34,109,35,108,35,218,35,108,35,109,0,109,35,108,34,109,35,109,37,217,37,109,37,109,0,108,37,109,35,109,37,108,39,218,42,108,39,109,44,218,42,108,44,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,109,39,108,0,109,39,109,37,108,39,109,39,217,39,109,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,108,44,218,42,108,44,109,35,218,35,108,35,109,0,109,35,108,34,109,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,37,218,37,217,39,217,39,218,41,217,41,218,42,217,42,217,35,218,35,109,35,108,0,109,35,109,34,108,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,109,37,217,37,109,37,108,0,109,37,109,35,108,37,109,37,217,40,109,37,109,42,217,40,109,42,109,39,217,39,109,39,108,0,109,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,42,108,39,109,44,218,42,108,44,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,35,218,35,109,35,108,0,109,35,109,34,108,35,109,37,217,37,109,37,109,0,109,37,108,35,109,37,109,37,217,40,109,37,108,42,218,40,108,42,109,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,42,109,39,109,44,217,42,109,44,108,35,218,35,108,35,109,0,109,35,109,34,108,35,109,35,217,35,109,35,109,0,108,35,109,34,109,35,109,37,217,37,109,37,108,0,109,37,109,35,108,37,109,37,217,40,109,37,109,42,217,40,109,42,109,39,217,39,109,39,108,0,109,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,109,0,108,39,109,37,109,39,108,39,218,42,108,39,109,44,218,42,108,44,109,35,217,35,109,35,109,0,108,35,109,34,109,35,108,35,218,35,109,35,108,0,109,35,109,34,108,35,109,37,217,37,109,37,109,0,108,37,109,35,109,37,109,37,217,40,109,37,108,42,218,40,108,42,109,39,218,39,108,39,109,0,109,39,108,37,109,39,109,39,217,39,109,39,108,0,109,39,109,37,109,39,108,39,218,39,108,39,109,0,109,39,108,37,109,39,109,44,435,42,434,0,0
SYNTH_END:	.word 0, 0
SYNTH_CURR:	.word 0

DRUMS:		.word 0,800,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,217,35,218,35,435,35,434,35,435,35,109,35,108,35,109,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,217,35,218,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,217,35,218,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,108,35,109,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,217,35,218,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,108,35,109,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,217,35,218,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,217,35,218,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,435,0,27826,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,109,35,434,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,109,35,434,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,434,35,435,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,109,35,434,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,109,35,434,35,435,35,435,35,435,35,434,35,435,35,435,35,109,35,108,35,109,35,109,35,435,35,434,35,435,35,218,35,217,35,435,35,435,35,434,35,109,35,109,35,108,35,109,35,435,35,435,35,434,35,218,35,217,35,435,35,435,35,435,35,108,35,109,35,109,35,108,35,435,35,435,35,435,35,217,35,217,35,435,35,435,35,435,35,109,35,108,35,109,35,109,35,434,35,435,35,435,35,435
DRUMS_END:	.word 0, 0
DRUMS_CURR:	.word 0

.text
SETUP_MUSIC:	la t0,VOCALS
		la t1,VOCALS_CURR
		sw t0,0(t1)
		
		la t0,SYNTH
		la t1,SYNTH_CURR
		sw t0,0(t1)
		
		la t0,DRUMS
		la t1,DRUMS_CURR
		sw t0,0(t1)
		
		ret

# a0 = note end address
# a1 = current note address
# a2 = instrument
PLAY:		lw t0,0(a0)
		
		csrr t1,3073		# current time
		sub t1,t1,t0		# now - last played
		
		lw t0,4(a0)
		bltu t1,t0,PLAY_RET
		
PLAY_NOTE:	lw t0,0(a1)		# t0 = current note address
		lw t1,0(t0)		# nota
		lw t2,4(t0)		# duracao
		
		beqz t1,LAST_PLAYED	# nota == 0, só espera
		
		mv t3,a0		# salva a0
		mv t4,a1		# salva a1
		
		mv a0,t1		# a0 = nota
		mv a1,t2		# a1 = duracao
		li a7,31		# define a chamada de syscall
		ecall			# toca a nota
		
		mv a0,t3		# restaura a0
		mv a1,t4		# restaura a1

LAST_PLAYED:	beqz t2,PLAY_RET	# nota == 0 e duracao == 0, acabou

		csrr t3,3073		# current time
		sw t3,0(a0)		# save next note time
		sw t2,4(a0)		# save duration
		
		addi t0,t0,8		# incrementa endereço da proxima nota
		sw t0,0(a1)		# salva proxima nota

PLAY_RET:	ret
